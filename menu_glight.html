<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Items</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/css/glightbox.min.css">
    <style>
        /* Your existing styles */
    </style>
</head>

<body>
    <h2 style="margin-bottom: 50px">Menu</h2>
    <!-- Category Buttons -->
    <div id="categoryButtons"></div>

    <!-- Menu Items Grid -->
    <div id="menuItems" class="grid" style="margin-bottom: 50px"></div>

    <!-- Allergy information -->
    <div class="menu" style="margin-bottom: 50px" id="allergy_info">
        <h2>Disclaimer</h2>
        <p>
            PLEASE NOTE THE FOLLOWING SYMBOLS INDICATE THE PRESENCE OF SPECIFIC ALLERGENS IN OUR MENU ITEMS.
            Wheat, Soy Peanuts, Tree Nuts, EGGS, Milk, shellfish, Sesame.<br>

            Consuming raw or undercooked meats, poultry, seafood, shellfish or eggs may increase a risk of foodborne
            illness, particularly for individuals with certain medical conditions. Please exercise caution when dining.
            Please Inform us of any severe allergies for extra precautions. For any additional questions or concerns
            regarding allergens, please feel free to reach out to us.<br>
        </p>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>
    <script>
        fetch('menu_items.csv')
            .then(response => response.text())
            .then(data => {
                const items = data.split('\n').map(line => {
                    const [name, description, imagePath, category, options] = line.replace(/(\r\n|\n|\r|\")/gm, "").replace(/(\\n)/gm, "\n").split(',');
                    return { name, description, imagePath, category, options };
                });
                const categories = [...new Set(items.map(item => item.category))];
                const categoryButtonsDiv = document.getElementById('categoryButtons');
                categories.forEach((category, index) => {
                    const button = document.createElement('button');
                    button.textContent = category;
                    button.id = category;
                    button.classList.add('btn', 'btn-primary', 'mx-2', 'my-2', 'rounded-pill');
                    button.addEventListener('click', () => filterItems(category));
                    categoryButtonsDiv.appendChild(button);
                });

                const menuItemsDiv = document.getElementById('menuItems');
                items.forEach(item => {
                    const card = document.createElement('div');
                    card.innerHTML = `
                    <a href="${item.imagePath}" class="glightbox ${item.category}" data-glightbox="title:${item.name}; description:${item.description.replace(/(-)/gm, ", ")}; group:${item.category}">
                        <img src="${item.imagePath}" alt="${item.name}" class="img-fluid">
                        <h2>${item.name.replace(/(_)/gm, " ")}</h2>
                        <p>${item.description.replace(/(-)/gm, ", ")}</p>
                    </a>`;
                    card.classList.add('card', item.category, 'menu');
                    card.setAttribute('data-aos', 'fade-up');
                    menuItemsDiv.appendChild(card);
                });

                // Select the first selection by default
                categoryButtonsDiv.querySelector('button[id="Appetizers"]').click();

                // Initialize glightbox for each category separately
                //categories.forEach(category => {
                //    GLightbox({
                //        selector: `.${category}`,
               //         closeOnOutsideClick: true,
                //        touchNavigation: true,
                //        loop: true,

                //    });
                //});
                const lightbox = GLightbox({
                    touchNavigation: true,
                    loop: true,
                    closeOnOutsideClick: true
                });

                // Function to filter items by category
                function filterItems(category) {
                    const cards = document.querySelectorAll('.card');
                    cards.forEach(card => {
                        if (card.classList.contains(category)) {
                            card.style.display = 'block';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                }

                
            });

            
    </script>


</body>

</html>